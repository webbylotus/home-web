<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MU/TH/UR_6000_OS</title>
    <link rel="stylesheet" href="style.css">
    <!--<link href="https://fonts.googleapis.com/css2?family=Michroma&display=swap" rel="stylesheet">-->
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Russo+One&display=swap" rel="stylesheet">
</head>
<body>
    <div class="crt-overlay"></div>
    
    <div class="industrial-header">
        <div class="wy-logo">WEYLAND-YUTANI</div>
        <div class="ticker-wrap">
            <span id="existential-ticker" class="ticker-content">CONNECTING TO MAINFRAME...</span>
        </div>
    </div>

    <div class="interface-container">
        <header class="system-meta-row">
            <div class="status-box">PRIORITY_ONE: <span id="server-status" class="blink">CHECKING</span></div>
            <div id="holocene-clock" class="clock"></div>
        </header>

        <div class="command-palette">
            <span class="prompt">QUERY_></span>
            <input type="text" id="terminal-input" placeholder="WAITING FOR COMMAND..." autofocus autocomplete="off">
        </div>
    
        <main id="link-grid" class="grid-container"></main>
    </div>

    <script>
                // 1. Homelab Ping Logic
                async function checkHomelab() {
                    const serverIp = "https://cloud.erucaeutstellae.com";
                    const statusEl = document.getElementById('server-status');
                
                    try {
                        // We use 'no-cors' because we don't need to read the data, 
                        // just see if the server responds at all.
                        await fetch(serverIp, { mode: 'no-cors', cache: 'no-cache' });
                        statusEl.innerText = "ESTABLISHED";
                        statusEl.style.color = "var(--text-color)";
                        statusEl.classList.remove('blink');
                    } catch (e) {
                        statusEl.innerText = "OFFLINE";
                        statusEl.style.color = "var(--accent-color)"; // Turns Amber/Red
                        statusEl.classList.add('blink');
                    }
                }
                
                // Run on load and every 30 seconds
                checkHomelab();
                setInterval(checkHomelab, 30000);  
        // Holocene Clock
        function updateClock() {
            const now = new Date();
            const heYear = (now.getFullYear() + 10000).toLocaleString().replace(',', '');
            const timeStr = now.toLocaleTimeString('en-GB', { hour12: false });
            document.getElementById('holocene-clock').innerText = `${heYear}HE // ${timeStr}`;
        }
        setInterval(updateClock, 1000);

        // Search/Filter Logic
        const searchInput = document.getElementById('terminal-input');
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            document.querySelectorAll('.link-item').forEach(item => {
                item.style.display = item.innerText.toLowerCase().includes(query) ? 'block' : 'none';
            });
            document.querySelectorAll('.link-section').forEach(section => {
                const visible = section.querySelectorAll('.link-item:not([style*="display: none"])');
                section.style.display = visible.length > 0 || query === "" ? 'block' : 'none';
            });
        });

        // Quotes with restored Fade & Randomization
        async function loadQuotes() {
            const response = await fetch('quotes.md');
            const text = await response.text();
            const quotes = text.split('\n').filter(q => q.trim() !== "");
            const ticker = document.getElementById('existential-ticker');
            
            const update = () => {
                ticker.style.opacity = 0;
                setTimeout(() => {
                    ticker.innerText = ` ${quotes[Math.floor(Math.random() * quotes.length)]}`;
                    ticker.style.opacity = 1;
                }, 1000);
            };
            update();
            setInterval(update, 10000);
        }

        // Link Loader
        async function loadLinks() {
            const response = await fetch('links.md');
            const text = await response.text();
            const grid = document.getElementById('link-grid');
            text.split('\n').forEach(line => {
                if (line.startsWith('## ')) {
                    const sec = document.createElement('div');
                    sec.className = 'link-section';
                    sec.innerHTML = `<h3 class="corp-header">${line.replace('## ', '').trim()}</h3>`;
                    grid.appendChild(sec);
                } else if (line.startsWith('- [')) {
                    const label = line.match(/\[(.*?)\]/)[1];
                    const url = line.match(/\((.*?)\)/)[1];
                    const a = document.createElement('a');
                    a.href = url; a.className = 'link-item'; a.innerText = label; a.target = "_blank";
                    grid.lastElementChild.appendChild(a);
                }
            });
        }

        updateClock(); loadQuotes(); loadLinks();
    </script>
</body>
</html>


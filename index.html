<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEYLAND-YUTANI // MU/TH/UR 6000</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Archivo+Black&display=swap" rel="stylesheet">
</head>
<body>
    <div class="crt-overlay"></div>
    <div class="grid-background"></div>

    <header class="os-header-center">
        <div class="wy-branding">
            <div class="wy-logo">WEYLAND-YUTANI CORP</div>
            <div class="wy-slogan">"BUILDING BETTER WORLDS"</div>
        </div>
        <div class="ticker-box">
            <span id="existential-ticker" class="ticker-text">CONNECTING TO MAINFRAME...</span>
        </div>
    </header>

    <div class="interface-container">
        <div class="system-meta-row">
            <div class="meta-item">NOSTROMO_DEEP_SPACE_UPLINK</div>
            <div class="meta-item status">UPLINK: <span id="server-status" class="blink">SEARCHING</span></div>
            <div id="holocene-clock" class="meta-item clock"></div>
        </div>

        <div class="command-palette">
            <span class="prompt">> MU/TH/UR CORE:</span>
            <input type="text" id="terminal-input" placeholder="WAITING FOR QUERY..." autofocus autocomplete="off">
        </div>
    
        <main id="link-grid" class="grid-container"></main>
    </div>
    
    <script>
             // 1. Homelab Ping Logic
                async function checkHomelab() {
                    const serverIp = "https://cloud.erucaeutstellae.com";
                    const statusEl = document.getElementById('server-status');
                
                    try {
                        // We use 'no-cors' because we don't need to read the data, 
                        // just see if the server responds at all.
                        await fetch(serverIp, { mode: 'no-cors', cache: 'no-cache' });
                        statusEl.innerText = "ESTABLISHED";
                        statusEl.style.color = "var(--text-color)";
                        statusEl.classList.remove('blink');
                    } catch (e) {
                        statusEl.innerText = "OFFLINE";
                        statusEl.style.color = "var(--accent-color)"; // Turns Amber/Red
                        statusEl.classList.add('blink');
                    }
                }
                
                // Run on load and every 30 seconds
                checkHomelab();
                setInterval(checkHomelab, 30000);    
        // Holocene Clock
        function updateClock() {
            const now = new Date();
            const heYear = (now.getFullYear() + 10000).toLocaleString().replace(',', '');
            const timeStr = now.toLocaleTimeString('en-GB', { hour12: false });
            document.getElementById('holocene-clock').innerText = `${heYear}HE // ${timeStr}`;
        }
        setInterval(updateClock, 1000);

        // Search/Filter Logic
        const searchInput = document.getElementById('terminal-input');
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            document.querySelectorAll('.link-item').forEach(item => {
                item.style.display = item.innerText.toLowerCase().includes(query) ? 'block' : 'none';
            });
            document.querySelectorAll('.link-section').forEach(section => {
                const visible = section.querySelectorAll('.link-item:not([style*="display: none"])');
                section.style.display = visible.length > 0 || query === "" ? 'block' : 'none';
            });
        });

        // Quotes with Slow Phosphor Realization
        async function loadQuotes() {
            const response = await fetch('quotes.md');
            const text = await response.text();
            const quotes = text.split('\n').filter(q => q.trim() !== "");
            const ticker = document.getElementById('existential-ticker');
            
            const update = () => {
                ticker.style.opacity = 0;
                setTimeout(() => {
                    ticker.innerText = quotes[Math.floor(Math.random() * quotes.length)].toUpperCase();
                    ticker.style.opacity = 1;
                }, 1500);
            };
            update();
            setInterval(update, 10000);
        }

        // Link Loader
        async function loadLinks() {
            const response = await fetch('links.md');
            const text = await response.text();
            const grid = document.getElementById('link-grid');
            grid.innerHTML = ''; // Clear initial state
            
            text.split('\n').forEach(line => {
                if (line.startsWith('## ')) {
                    const sec = document.createElement('div');
                    sec.className = 'link-section';
                    sec.innerHTML = `<h3 class="section-title">${line.replace('## ', '').trim()}</h3><div class="link-list"></div>`;
                    grid.appendChild(sec);
                } else if (line.startsWith('- [') && grid.lastElementChild) {
                    const label = line.match(/\[(.*?)\]/);
                    const url = line.match(/\((.*?)\)/);
                    const list = grid.lastElementChild.querySelector('.link-list');
                    const a = document.createElement('a');
                    a.href = url; 
                    a.className = 'link-item'; 
                    a.innerText = label; // Fixed: avoid appending to innerHTML directly
                    a.target = "_blank";
                    list.appendChild(a);
                }
            });
        }

        updateClock(); loadQuotes(); loadLinks();
    </script>
</body>
</html>




